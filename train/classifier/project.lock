fill-config:
  cmd: python -m spacy run fill-config
  script:
    - python -m spacy init fill-config config/base_config.cfg config/config.cfg
  deps: []
  outs: []
  spacy_version: 3.4.4
  spacy_git_version: 77833bfef
convert:
  cmd: python -m spacy run convert
  script:
    - python scripts/convert.py en assets/train-classifier.csv corpus
  deps:
    - path: assets/train-classifier.csv
      md5: 6069fce061504d67cf438b0e0231a9b8
  outs:
    - path: corpus/train.spacy
      md5: b0c48c5e193be7d5369544da07f00dcf
    - path: corpus/test.spacy
      md5: 438d334953049f874f86ec2d68b1da1f
  spacy_version: 3.4.4
  spacy_git_version: 77833bfef
train:
  cmd: python -m spacy run train
  script:
    - 'python -m spacy train config/config.cfg --output training/vector --paths.train
      corpus/train.spacy --paths.dev corpus/test.spacy --gpu-id -1 --initialize.vectors
      en_core_sci_md '
  deps:
    - path: config/config.cfg
      md5: 1d0e52a72697ca44cd478d7dd2335451
    - path: corpus/train.spacy
      md5: b0c48c5e193be7d5369544da07f00dcf
    - path: corpus/test.spacy
      md5: 438d334953049f874f86ec2d68b1da1f
  outs:
    - path: training/vector/model-best
      md5: d4ca15a2b900ae09380723543994222d
  spacy_version: 3.4.4
  spacy_git_version: 77833bfef
evaluate:
  cmd: python -m spacy run evaluate
  script:
    - python -m spacy evaluate training/vector/model-best corpus/test.spacy --output
      training/vector/metrics.json
  deps:
    - path: corpus/test.spacy
      md5: 438d334953049f874f86ec2d68b1da1f
    - path: training/vector/model-best
      md5: d4ca15a2b900ae09380723543994222d
  outs:
    - path: training/vector/metrics.json
      md5: 1e23e879466a9660ea23923c385f5ccf
  spacy_version: 3.4.4
  spacy_git_version: 77833bfef
download:
  cmd: python -m spacy run download
  script:
    - pip install https://s3-us-west-2.amazonaws.com/ai2-s2-scispacy/releases/v0.5.1/en_core_sci_md-0.5.1.tar.gz
  deps: []
  outs: []
  spacy_version: 3.4.4
  spacy_git_version: 77833bfef
train-trf:
  cmd: python -m spacy run train-trf
  script:
    - python scripts/train.py --dataset-dir corpus --training-dir training/trf --model-path
      ../models/en_classifier-scibert.pt --checkpoint allenai/scibert_scivocab_cased
  deps:
    - path: assets/train-classifier.csv
      md5: 6069fce061504d67cf438b0e0231a9b8
  outs: []
  spacy_version: 3.4.4
  spacy_git_version: 77833bfef
convert-trf:
  cmd: python -m spacy run convert-trf
  script:
    - python scripts/convert_trf.py assets/train-classifier.csv corpus
  deps:
    - path: assets/train-classifier.csv
      md5: 6069fce061504d67cf438b0e0231a9b8
  outs:
    - path: corpus/dataset_dict.json
      md5: 08472087f6a2df5cf2d6a1688880767a
  spacy_version: 3.4.4
  spacy_git_version: 77833bfef
evaluate-trf:
  cmd: python -m spacy run evaluate-trf
  script:
    - python scripts/evaluation.py corpus training/trf allenai/scibert_scivocab_cased
  deps: []
  outs: []
  spacy_version: 3.4.4
  spacy_git_version: 77833bfef
